<!DOCTYPE html>
<html lang="en" xml:lang="en">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 Avoiding Repetition | How to Be an Rtist: A Beginner’s Guide to Beautiful, Intentional R Projects</title>
  <meta name="description" content="How do you get inspired to write in R? Many books teach you what to write, but not how to find inspiration. This book starts from the ground up. You’ve just installed R and RStudio - what do you do now? What’s the best way to get results? This book will show you how to get there, line-by-line, step-by-step. At some point, in trying to get your own work done, you will get stuck. This book will show how to get unstuck. Finally, it explains how prevent yourself from getting stuck in the first place. All of this will keep you in the flow of writing beautiful, intentional R code." />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 Avoiding Repetition | How to Be an Rtist: A Beginner’s Guide to Beautiful, Intentional R Projects" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://bookdown.org/asadow/how-to-be-an-Rtist/images/bob-ross.jpg" />
  <meta property="og:description" content="How do you get inspired to write in R? Many books teach you what to write, but not how to find inspiration. This book starts from the ground up. You’ve just installed R and RStudio - what do you do now? What’s the best way to get results? This book will show you how to get there, line-by-line, step-by-step. At some point, in trying to get your own work done, you will get stuck. This book will show how to get unstuck. Finally, it explains how prevent yourself from getting stuck in the first place. All of this will keep you in the flow of writing beautiful, intentional R code." />
  <meta name="github-repo" content="asadow/how-to-be-an-Rtist" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Avoiding Repetition | How to Be an Rtist: A Beginner’s Guide to Beautiful, Intentional R Projects" />
  
  <meta name="twitter:description" content="How do you get inspired to write in R? Many books teach you what to write, but not how to find inspiration. This book starts from the ground up. You’ve just installed R and RStudio - what do you do now? What’s the best way to get results? This book will show you how to get there, line-by-line, step-by-step. At some point, in trying to get your own work done, you will get stuck. This book will show how to get unstuck. Finally, it explains how prevent yourself from getting stuck in the first place. All of this will keep you in the flow of writing beautiful, intentional R code." />
  <meta name="twitter:image" content="https://bookdown.org/asadow/how-to-be-an-Rtist/images/bob-ross.jpg" />

<meta name="author" content="Adam Sadowski" />


<meta name="date" content="2025-01-09" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="strings.html"/>
<link rel="next" href="next-steps-for-this-guide.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<script src="libs/viz-1.8.2/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.11/grViz.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preface</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#why-this-book"><i class="fa fa-check"></i><b>1.1</b> Why <em>This</em> Book?</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#for-the-love-of-r"><i class="fa fa-check"></i><b>1.2</b> For the Love of R</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="writing-reports.html"><a href="writing-reports.html"><i class="fa fa-check"></i><b>2</b> Writing Reports</a>
<ul>
<li class="chapter" data-level="2.1" data-path="writing-reports.html"><a href="writing-reports.html#lines-and-lists"><i class="fa fa-check"></i><b>2.1</b> Lines and Lists</a></li>
<li class="chapter" data-level="2.2" data-path="writing-reports.html"><a href="writing-reports.html#code"><i class="fa fa-check"></i><b>2.2</b> Code</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="writing-reports.html"><a href="writing-reports.html#declaring-with-single-back-ticks"><i class="fa fa-check"></i><b>2.2.1</b> Declaring With Single Back-Ticks</a></li>
<li class="chapter" data-level="2.2.2" data-path="writing-reports.html"><a href="writing-reports.html#declaring-with-multiple-back-ticks"><i class="fa fa-check"></i><b>2.2.2</b> Declaring With Multiple Back-Ticks</a></li>
<li class="chapter" data-level="2.2.3" data-path="writing-reports.html"><a href="writing-reports.html#summary"><i class="fa fa-check"></i><b>2.2.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="writing-reports.html"><a href="writing-reports.html#errors"><i class="fa fa-check"></i><b>2.3</b> Errors</a></li>
<li class="chapter" data-level="2.4" data-path="writing-reports.html"><a href="writing-reports.html#links"><i class="fa fa-check"></i><b>2.4</b> Links</a></li>
<li class="chapter" data-level="2.5" data-path="writing-reports.html"><a href="writing-reports.html#keyboard-shortcuts"><i class="fa fa-check"></i><b>2.5</b> Keyboard Shortcuts</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="file-naming.html"><a href="file-naming.html"><i class="fa fa-check"></i><b>3</b> File Naming</a>
<ul>
<li class="chapter" data-level="3.1" data-path="file-naming.html"><a href="file-naming.html#consistency"><i class="fa fa-check"></i><b>3.1</b> Consistency</a></li>
<li class="chapter" data-level="3.2" data-path="file-naming.html"><a href="file-naming.html#why-consistency-matters"><i class="fa fa-check"></i><b>3.2</b> Why Consistency Matters</a></li>
<li class="chapter" data-level="3.3" data-path="file-naming.html"><a href="file-naming.html#finding-and-organizing-our-files"><i class="fa fa-check"></i><b>3.3</b> Finding and Organizing Our Files</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="file-naming.html"><a href="file-naming.html#reading-in-data"><i class="fa fa-check"></i><b>3.3.1</b> Reading in Data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="opening-the-data.html"><a href="opening-the-data.html"><i class="fa fa-check"></i><b>4</b> Opening the Data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="opening-the-data.html"><a href="opening-the-data.html#checking-data"><i class="fa fa-check"></i><b>4.1</b> Checking Data</a></li>
<li class="chapter" data-level="4.2" data-path="opening-the-data.html"><a href="opening-the-data.html#finding-functions"><i class="fa fa-check"></i><b>4.2</b> Finding Functions</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="opening-the-data.html"><a href="opening-the-data.html#large-language-models"><i class="fa fa-check"></i><b>4.2.1</b> Large-Language-Models</a></li>
<li class="chapter" data-level="4.2.2" data-path="opening-the-data.html"><a href="opening-the-data.html#google"><i class="fa fa-check"></i><b>4.2.2</b> Google</a></li>
<li class="chapter" data-level="4.2.3" data-path="opening-the-data.html"><a href="opening-the-data.html#stack-overflow"><i class="fa fa-check"></i><b>4.2.3</b> Stack Overflow</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="opening-the-data.html"><a href="opening-the-data.html#finding-function-documentation-for-understanding-functions"><i class="fa fa-check"></i><b>4.3</b> Finding Function Documentation for Understanding Functions</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="opening-the-data.html"><a href="opening-the-data.html#google-1"><i class="fa fa-check"></i><b>4.3.1</b> Google</a></li>
<li class="chapter" data-level="4.3.2" data-path="opening-the-data.html"><a href="opening-the-data.html#stack-overflow-1"><i class="fa fa-check"></i><b>4.3.2</b> Stack Overflow</a></li>
<li class="chapter" data-level="4.3.3" data-path="opening-the-data.html"><a href="opening-the-data.html#books"><i class="fa fa-check"></i><b>4.3.3</b> Books</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="understanding-tidyverse-functions.html"><a href="understanding-tidyverse-functions.html"><i class="fa fa-check"></i><b>5</b> Understanding Tidyverse Functions</a>
<ul>
<li class="chapter" data-level="5.1" data-path="understanding-tidyverse-functions.html"><a href="understanding-tidyverse-functions.html#mutate"><i class="fa fa-check"></i><b>5.1</b> <code>mutate</code></a></li>
<li class="chapter" data-level="5.2" data-path="understanding-tidyverse-functions.html"><a href="understanding-tidyverse-functions.html#pumping-with"><i class="fa fa-check"></i><b>5.2</b> Pumping with <code>%&gt;%</code></a></li>
<li class="chapter" data-level="5.3" data-path="understanding-tidyverse-functions.html"><a href="understanding-tidyverse-functions.html#grouping-with-group"><i class="fa fa-check"></i><b>5.3</b> Grouping with <code>group</code></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="strings.html"><a href="strings.html"><i class="fa fa-check"></i><b>6</b> Strings</a>
<ul>
<li class="chapter" data-level="6.1" data-path="strings.html"><a href="strings.html#patterns-and-regular-expressions-regexes"><i class="fa fa-check"></i><b>6.1</b> Patterns and Regular Expressions (regexes)</a></li>
<li class="chapter" data-level="6.2" data-path="strings.html"><a href="strings.html#motivation"><i class="fa fa-check"></i><b>6.2</b> Motivation</a></li>
<li class="chapter" data-level="6.3" data-path="strings.html"><a href="strings.html#understanding-representations"><i class="fa fa-check"></i><b>6.3</b> Understanding Representations</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="avoiding-repetition.html"><a href="avoiding-repetition.html"><i class="fa fa-check"></i><b>7</b> Avoiding Repetition</a></li>
<li class="chapter" data-level="8" data-path="next-steps-for-this-guide.html"><a href="next-steps-for-this-guide.html"><i class="fa fa-check"></i><b>8</b> Next Steps for This Guide</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">How to Be an Rtist: A Beginner’s Guide to Beautiful, Intentional R Projects</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="avoiding-repetition" class="section level1 hasAnchor" number="7">
<h1><span class="header-section-number">Chapter 7</span> Avoiding Repetition<a href="avoiding-repetition.html#avoiding-repetition" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Let’s say we need to read data in again, and we have named your files as per the chapter on File Naming. To summarize, the file names have phrases with words separated by -, and multiple phrases are separated by _.</p>
<p>Instead of copy-pasting the same code we used the previous time, we can avoid this repetition with a function. We can create this function by assigning <code>function()</code> to an object, and entering the inputs inside the <code>()</code> like so:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="avoiding-repetition.html#cb116-1" tabindex="-1"></a>sum <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y) x <span class="sc">+</span> y</span>
<span id="cb116-2"><a href="avoiding-repetition.html#cb116-2" tabindex="-1"></a><span class="fu">sum</span>(<span class="dv">2</span>, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>&gt;&gt; [1] 4</code></pre>
<p>The inputs of a function should be the parts of the function that change over repeated use. Since we want to repeat the code to read in data, but without being repetitive, our function will only contain inputs that are not repetitive. What part of reading our data is not repetitive now that we want to repeat the task for a set of different files.</p>
<p>For one, we can imagine that a new set of files might have a different number of phrases in the file names. So one input of our function can be <code>n_phrases</code>. Two, we can imagine that the phrases represent something different. Since we named them previously, let us call a second input of our function <code>names_phrases</code>.</p>
<p>Lastly, we need to name our function. The function name should reflect the main behaviour. If it is hard to identify the main behaviour, then it is probably best to split the function into multiple functions. Naming the functions appropriately is important for readability.</p>
<p>Let us start by listing the behaviours of our function or functions:</p>
<ul>
<li>Choose a file</li>
<li>Find the folder (directory) of this file</li>
<li>Find the names of the csv files in this folder</li>
<li>Get a matrix from splitting the phrases in each name</li>
<li>Name the columns and turn the matrix into a tibble</li>
<li>For each row representing a file, read its respective data into the tibble</li>
</ul>
<p>That is a lot for one name to represent. Hence it is more prudent to separate these behaviours into multiple functions.</p>
<p>CONTINUE HERE</p>
<p>Although we could place all the code needed to read in data inside our function and name the function <code>read_csv_in_df</code>, this is not a good idea. First, it is inconsistent with the popular function <code>read_csv</code>, which has more than two arguments, the first of which is a file path.</p>
<p>With only two arguments, our function has the form <code>function(n_phrases, names_phrases){code}</code>. The code it will execute is in curly brackets <code>{}</code>. Although curly brackets were not needed in <code>function(x, y) x + y</code>, it will be needed here as the code will have multiple lines.</p>
<p>Although we could place all the code needed to read in data inside and name the function <code>read_csv_in_df</code>, then we would be acting without much care.</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="avoiding-repetition.html#cb118-1" tabindex="-1"></a>read_csv_in_df <span class="ot">&lt;-</span> <span class="cf">function</span>(n_phrases, names_phrases){</span>
<span id="cb118-2"><a href="avoiding-repetition.html#cb118-2" tabindex="-1"></a></span>
<span id="cb118-3"><a href="avoiding-repetition.html#cb118-3" tabindex="-1"></a>  one_file_path <span class="ot">&lt;-</span> <span class="fu">file.choose</span>()</span>
<span id="cb118-4"><a href="avoiding-repetition.html#cb118-4" tabindex="-1"></a>  directory_path <span class="ot">&lt;-</span> one_file_path <span class="sc">%&gt;%</span> path_dir</span>
<span id="cb118-5"><a href="avoiding-repetition.html#cb118-5" tabindex="-1"></a>  file_names <span class="ot">&lt;-</span> directory_path <span class="sc">%&gt;%</span> <span class="fu">list.files</span>(<span class="at">pattern =</span> <span class="st">&quot;csv&quot;</span>)</span>
<span id="cb118-6"><a href="avoiding-repetition.html#cb118-6" tabindex="-1"></a>  file_paths <span class="ot">&lt;-</span> directory_path <span class="sc">%&gt;%</span> dir_ls</span>
<span id="cb118-7"><a href="avoiding-repetition.html#cb118-7" tabindex="-1"></a></span>
<span id="cb118-8"><a href="avoiding-repetition.html#cb118-8" tabindex="-1"></a>  split_matrix <span class="ot">&lt;-</span> file_names <span class="sc">%&gt;%</span> <span class="fu">str_split_fixed</span>(<span class="st">&quot;[._]&quot;</span>, n_phrases)</span>
<span id="cb118-9"><a href="avoiding-repetition.html#cb118-9" tabindex="-1"></a>  <span class="fu">colnames</span>(split_matrix) <span class="ot">&lt;-</span> names_phrases</span>
<span id="cb118-10"><a href="avoiding-repetition.html#cb118-10" tabindex="-1"></a></span>
<span id="cb118-11"><a href="avoiding-repetition.html#cb118-11" tabindex="-1"></a>  df <span class="ot">&lt;-</span> split_matrix <span class="sc">%&gt;%</span></span>
<span id="cb118-12"><a href="avoiding-repetition.html#cb118-12" tabindex="-1"></a>    as_tibble <span class="sc">%&gt;%</span></span>
<span id="cb118-13"><a href="avoiding-repetition.html#cb118-13" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">data =</span> <span class="fu">map</span>(file_paths, read_csv))</span>
<span id="cb118-14"><a href="avoiding-repetition.html#cb118-14" tabindex="-1"></a></span>
<span id="cb118-15"><a href="avoiding-repetition.html#cb118-15" tabindex="-1"></a>  df</span>
<span id="cb118-16"><a href="avoiding-repetition.html#cb118-16" tabindex="-1"></a></span>
<span id="cb118-17"><a href="avoiding-repetition.html#cb118-17" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="avoiding-repetition.html#cb119-1" tabindex="-1"></a><span class="co"># read_csv_in_df</span></span></code></pre></div>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="avoiding-repetition.html#cb120-1" tabindex="-1"></a><span class="co"># read_csv_in_df(4, c(&quot;source&quot;, &quot;country&quot;, &quot;date&quot; ,&quot;file_type&quot;))</span></span></code></pre></div>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="strings.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="next-steps-for-this-guide.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
